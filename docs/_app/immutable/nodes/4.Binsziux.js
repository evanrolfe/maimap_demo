import{f as b,e as m,a as d,c as Z}from"../chunks/DZs8rR8k.js";import"../chunks/D2htM9l8.js";import{o as bt}from"../chunks/CSfjm-6H.js";import{p as ht,v as $,k as B,d as yt,f as v,m as k,e as r,s as n,r as a,g as t,j as tt,i as E}from"../chunks/B4RuN_dZ.js";import{s as A}from"../chunks/Bwak9JMZ.js";import{i as M}from"../chunks/B2LozDeQ.js";import{e as gt,i as xt}from"../chunks/dk5Fz5Mq.js";import{r as C,s as St}from"../chunks/C6Um85Qa.js";import{a as F}from"../chunks/Gaoq9xH0.js";import{i as wt}from"../chunks/D_xYtrhe.js";import{g as kt}from"../chunks/BKdHKRFY.js";import{g as Et}from"../chunks/DJNhhgtY.js";import{g as At,c as Mt}from"../chunks/M8vgo97S.js";var Ct=b('<div class="app-card p-4"><h3 class="mb-4 h4">New Service</h3> <div class="grid grid-cols-1 gap-4 md:grid-cols-2"><label class="label"><span>Service Name</span> <input type="text" placeholder="Enter service name" class="app-input"/></label> <label class="label"><span>Git Repository URL</span> <input type="text" placeholder="https://github.com/org/repo" class="app-input"/></label> <label class="label"><span>Entrypoint Path</span> <input type="text" placeholder="cmd/main.go" class="app-input"/></label> <label class="label"><span>Entrypoint Function</span> <input type="text" placeholder="main" class="app-input"/></label></div> <div class="mt-4 flex justify-end gap-2"><button type="button" class="btn preset-filled-tertiary-500">Save</button> <button type="button" class="btn preset-filled-surface-500">Cancel</button></div></div>'),Ft=b('<div class="p-8 text-center"><p>Loading services...</p></div>'),Nt=b('<div class="text-surface-600-300-token p-8 text-center"><p>No services found. Add your first service to get started.</p> <br/> <button type="button" class="btn preset-filled-tertiary-500">Add Service</button></div>'),jt=b('<tr><td><button type="button" class="anchor hover:underline cursor-pointer text-left"> </button></td><td> </td><td><span> </span></td><td> </td><td><button type="button" class="btn preset-filled btn-sm">View &rarr;</button></td></tr>'),Lt=b('<div class="table-container"><table class="app-table"><thead><tr><th>Name</th><th>Git Repository</th><th>Status</th><th>Created At</th><th>Actions</th></tr></thead><tbody></tbody></table></div>'),Rt=b('<div class="space-y-6 p-6"><div class="flex items-center justify-between"><div><h1 class="h3">Services</h1> <p class="text-surface-600-300-token mt-1">Manage and monitor your services.</p></div> <button type="button" class="btn preset-filled-tertiary-500 rounded-sm">Add Service</button></div> <!> <div class="app-card"><div class="p-6"><!></div></div></div>');function Qt(et,at){ht(at,!1);let N=k([]),H=k(!0),u=k(!1),s=k({name:"",git_repo_url:"",entrypoint_path:"",entrypoint_function:""});const{displayFlash:rt}=$("flashMessage"),{displayFlashErrorMessage:I}=$("flashErrorMessage");bt(async()=>{await K(),v(H,!1)});function st(e){return new Date(e).toLocaleString()}function J(){v(u,!0),v(s,{name:"",git_repo_url:"",entrypoint_path:"",entrypoint_function:""})}function nt(){v(u,!1),v(s,{name:"",git_repo_url:"",entrypoint_path:"",entrypoint_function:""})}async function K(){try{const e=await At();v(N,e.map(i=>({...i,created_at:st(i.created_at)})))}catch(e){const i=e instanceof Error?e.message:"Failed to fetch services";I(i),console.error("Error fetching services:",e)}}async function it(){try{await Mt({name:t(s).name.trim(),git_repo_url:t(s).git_repo_url.trim(),entrypoint_path:t(s).entrypoint_path.trim(),entrypoint_function:t(s).entrypoint_function.trim()}),rt("Service saved successfully!"),v(u,!1),v(s,{name:"",git_repo_url:"",entrypoint_path:"",entrypoint_function:""}),await K()}catch(e){const i=e instanceof Error?e.message:"Failed to save service";I(i),console.error("Error saving service:",e)}}function O(e){kt(`/services/${e}`)}wt();var j=Rt(),L=r(j),Q=n(r(L),2);a(L);var T=n(L,2);{var ot=e=>{var i=Ct(),h=n(r(i),2),y=r(h),_=n(r(y),2);C(_),a(y);var f=n(y,2),S=n(r(f),2);C(S),a(f);var g=n(f,2),w=n(r(g),2);C(w),a(g);var p=n(g,2),l=n(r(p),2);C(l),a(p),a(h);var c=n(h,2),x=r(c),R=n(x,2);a(c),a(i),F(_,()=>t(s).name,o=>E(s,t(s).name=o)),F(S,()=>t(s).git_repo_url,o=>E(s,t(s).git_repo_url=o)),F(w,()=>t(s).entrypoint_path,o=>E(s,t(s).entrypoint_path=o)),F(l,()=>t(s).entrypoint_function,o=>E(s,t(s).entrypoint_function=o)),m("click",x,it),m("click",R,nt),d(e,i)};M(T,e=>{t(u)&&e(ot)})}var W=n(T,2),X=r(W),lt=r(X);{var pt=e=>{var i=Ft();d(e,i)},ct=e=>{var i=Z(),h=tt(i);{var y=_=>{var f=Z(),S=tt(f);{var g=p=>{var l=Nt(),c=n(r(l),4);a(l),B(()=>c.disabled=t(u)),m("click",c,J),d(p,l)},w=p=>{var l=Lt(),c=r(l),x=n(r(c));gt(x,5,()=>t(N),xt,(R,o)=>{var D=jt(),G=r(D),V=r(G),dt=r(V,!0);a(V),a(G);var P=n(G),vt=r(P,!0);a(P);var U=n(P),q=r(U),ut=r(q,!0);a(q),a(U);var z=n(U),_t=r(z,!0);a(z);var Y=n(z),ft=r(Y);a(Y),a(D),B(mt=>{A(dt,t(o).name),A(vt,t(o).git_repo_url),St(q,1,`badge ${mt??""}`),A(ut,t(o).status),A(_t,t(o).created_at)},[()=>Et(t(o).status)]),m("click",V,()=>O(t(o).id)),m("click",ft,()=>O(t(o).id)),d(R,D)}),a(x),a(c),a(l),d(p,l)};M(S,p=>{t(N).length===0?p(g):p(w,!1)},!0)}d(_,f)};M(h,_=>{_(y,!1)},!0)}d(e,i)};M(lt,e=>{t(H)?e(pt):e(ct,!1)})}a(X),a(W),a(j),B(()=>Q.disabled=t(u)),m("click",Q,J),d(et,j),yt()}export{Qt as component};
