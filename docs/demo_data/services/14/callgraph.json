{"nodes":[{"code":"func main() {\n\t// Load configuration\n\tcfg := config.NewServiceConfig(\"profile\", 8082)\n\tkafkaCfg := config.NewKafkaConfig(\"profile-service\")\n\n\t// Initialize logger\n\tlogger.Init(cfg.Name, cfg.LogLevel)\n\tlogger.Info(\"starting profile service\",\n\t\tzap.Int(\"port\", cfg.Port),\n\t\tzap.String(\"environment\", cfg.Environment),\n\t)\n\n\t// Connect to MongoDB\n\tmongoURI := config.GetEnv(\"MONGO_URI\", \"mongodb://rinder:rinder123@localhost:27017\")\n\tmongoDatabase := config.GetEnv(\"MONGO_DATABASE\", \"rinder_profiles\")\n\n\tctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n\tdefer cancel()\n\n\tclientOpts := options.Client().ApplyURI(mongoURI)\n\tmongoClient, err := mongo.Connect(ctx, clientOpts)\n\tif err != nil {\n\t\tlogger.Fatal(\"failed to connect to MongoDB\", zap.Error(err))\n\t}\n\tdefer mongoClient.Disconnect(context.Background())\n\n\t// Ping MongoDB\n\tif err := mongoClient.Ping(ctx, nil); err != nil {\n\t\tlogger.Fatal(\"failed to ping MongoDB\", zap.Error(err))\n\t}\n\tlogger.Info(\"connected to MongoDB\")\n\n\tdb := mongoClient.Database(mongoDatabase)\n\n\t// Initialize Kafka producer\n\tproducer := kafka.NewProducer(kafkaCfg.Brokers, cfg.Name)\n\tdefer producer.Close()\n\n\t// Initialize repository\n\tprofileRepo := repository.NewProfileRepository(db)\n\n\t// Create indexes\n\tif err := profileRepo.CreateIndexes(context.Background()); err != nil {\n\t\tlogger.Error(\"failed to create indexes\", zap.Error(err))\n\t}\n\n\t// Cross-service URL for Media Service\n\tmediaServiceURL := config.GetEnv(\"MEDIA_SERVICE_URL\", \"http://localhost:8086\")\n\n\t// Initialize service with cross-service client\n\tprofileService := service.NewProfileService(profileRepo, producer, mediaServiceURL)\n\tlogger.Info(\"profile service initialized with cross-service client\",\n\t\tzap.String(\"media_service\", mediaServiceURL),\n\t)\n\n\t// Initialize handler\n\th := handler.NewHandler(profileService)\n\n\t// Setup routes\n\tmux := http.NewServeMux()\n\th.RegisterRoutes(mux)\n\n\t// Apply middleware (CORS is handled by the gateway)\n\tvar httpHandler http.Handler = mux\n\thttpHandler = middleware.Logging(httpHandler)\n\thttpHandler = middleware.Recovery(httpHandler)\n\n\t// Start Kafka consumer for user events\n\tkafkaConsumer := consumer.NewUserEventConsumer(kafkaCfg.Brokers, kafkaCfg.GroupID, profileService)\n\tconsumerCtx, consumerCancel := context.WithCancel(context.Background())\n\tgo kafkaConsumer.Start(consumerCtx)\n\n\t// Create server\n\tserver := \u0026http.Server{\n\t\tAddr:         fmt.Sprintf(\":%d\", cfg.Port),\n\t\tHandler:      httpHandler,\n\t\tReadTimeout:  15 * time.Second,\n\t\tWriteTimeout: 15 * time.Second,\n\t\tIdleTimeout:  60 * time.Second,\n\t}\n\n\t// Start server\n\tgo func() {\n\t\tlogger.Info(\"profile service listening\", zap.String(\"addr\", server.Addr))\n\t\tif err := server.ListenAndServe(); err != nil \u0026\u0026 err != http.ErrServerClosed {\n\t\t\tlogger.Fatal(\"failed to start server\", zap.Error(err))\n\t\t}\n\t}()\n\n\t// Wait for interrupt signal\n\tquit := make(chan os.Signal, 1)\n\tsignal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)\n\t\u003c-quit\n\n\tlogger.Info(\"shutting down server...\")\n\n\t// Stop consumer\n\tconsumerCancel()\n\n\t// Graceful shutdown\n\tshutdownCtx, shutdownCancel := context.WithTimeout(context.Background(), 30*time.Second)\n\tdefer shutdownCancel()\n\n\tif err := server.Shutdown(shutdownCtx); err != nil {\n\t\tlogger.Fatal(\"server forced to shutdown\", zap.Error(err))\n\t}\n\n\tlogger.Info(\"server exited properly\")\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","name":"ROOT","node_type":"function"},{"code":"func NewProfileRepository(db *mongo.Database) *ProfileRepository {\n\treturn \u0026ProfileRepository{\n\t\tcollection: db.Collection(\"profiles\"),\n\t}\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:20:6","name":"NewProfileRepository","node_type":"function"},{"code":"func (r *ProfileRepository) CreateIndexes(ctx context.Context) error {\n\tindexes := []mongo.IndexModel{\n\t\t{\n\t\t\tKeys:    bson.D{{Key: \"user_id\", Value: 1}},\n\t\t\tOptions: options.Index().SetBackground(true),\n\t\t},\n\t\t{\n\t\t\tKeys:    bson.D{{Key: \"breed\", Value: 1}},\n\t\t\tOptions: options.Index().SetBackground(true),\n\t\t},\n\t\t{\n\t\t\tKeys:    bson.D{{Key: \"is_active\", Value: 1}},\n\t\t\tOptions: options.Index().SetBackground(true),\n\t\t},\n\t\t{\n\t\t\tKeys:    bson.D{{Key: \"location\", Value: \"2dsphere\"}},\n\t\t\tOptions: options.Index().SetBackground(true).SetSparse(true),\n\t\t},\n\t\t{\n\t\t\tKeys:    bson.D{{Key: \"created_at\", Value: -1}},\n\t\t\tOptions: options.Index().SetBackground(true),\n\t\t},\n\t}\n\n\t_, err := r.collection.Indexes().CreateMany(ctx, indexes)\n\treturn err\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:27:29","name":"CreateIndexes","node_type":"function"},{"code":"func NewProfileService(repo *repository.ProfileRepository, producer *kafka.Producer, mediaServiceURL string) *ProfileService {\n\tvar mediaClient *httpclient.Client\n\tif mediaServiceURL != \"\" {\n\t\tmediaClient = httpclient.NewClient(mediaServiceURL, \"media-service\", 5*time.Second)\n\t}\n\treturn \u0026ProfileService{\n\t\trepo:        repo,\n\t\tproducer:    producer,\n\t\tmediaClient: mediaClient,\n\t}\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:28:6","name":"NewProfileService","node_type":"function"},{"code":"func NewHandler(profileService *service.ProfileService) *Handler {\n\treturn \u0026Handler{\n\t\tprofileService: profileService,\n\t}\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:21:6","name":"NewHandler","node_type":"function"},{"code":"func (h *Handler) RegisterRoutes(mux *http.ServeMux) {\n\t// Health check\n\tmux.HandleFunc(\"/health\", h.healthCheck)\n\n\t// Profile routes (these expect X-User-ID header from gateway)\n\tmux.HandleFunc(\"/api/v1/profiles\", h.profiles)\n\tmux.HandleFunc(\"/api/v1/profiles/me\", h.myProfiles)\n\tmux.HandleFunc(\"/api/v1/profiles/user/\", h.profilesByUserID)\n\tmux.HandleFunc(\"/api/v1/profiles/\", h.profileByID)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","name":"RegisterRoutes","node_type":"function"},{"code":"func (h *Handler) healthCheck(w http.ResponseWriter, r *http.Request) {\n\tw.Header().Set(\"Content-Type\", \"application/json\")\n\tw.WriteHeader(http.StatusOK)\n\tw.Write([]byte(`{\"status\":\"healthy\",\"service\":\"profile\"}`))\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:39:19","name":"healthCheck","node_type":"function"},{"code":"func (h *Handler) profiles(w http.ResponseWriter, r *http.Request) {\n\tuserID := r.Header.Get(\"X-User-ID\")\n\n\tswitch r.Method {\n\tcase http.MethodPost:\n\t\tif userID == \"\" {\n\t\t\tresponse.Error(w, errors.Unauthorized(\"authentication required\"))\n\t\t\treturn\n\t\t}\n\t\th.createProfile(w, r, userID)\n\n\tcase http.MethodGet:\n\t\th.listProfiles(w, r)\n\n\tdefault:\n\t\tresponse.Error(w, errors.BadRequest(\"method not allowed\"))\n\t}\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","name":"profiles","node_type":"function"},{"code":"func (h *Handler) createProfile(w http.ResponseWriter, r *http.Request, userID string) {\n\tvar req model.CreateProfileRequest\n\tif err := json.NewDecoder(r.Body).Decode(\u0026req); err != nil {\n\t\tresponse.Error(w, errors.BadRequest(\"invalid request body\"))\n\t\treturn\n\t}\n\n\tprofile, err := h.profileService.CreateProfile(r.Context(), userID, \u0026req)\n\tif err != nil {\n\t\tresponse.Error(w, err)\n\t\treturn\n\t}\n\n\tresponse.Created(w, profile)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","name":"createProfile","node_type":"function"},{"code":"func (s *ProfileService) CreateProfile(ctx context.Context, userID string, req *model.CreateProfileRequest) (*model.Profile, error) {\n\t// Validate request\n\tif err := s.validateCreateRequest(req); err != nil {\n\t\treturn nil, err\n\t}\n\n\t// Check profile limit per user\n\tcount, err := s.repo.CountByUserID(ctx, userID)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif count \u003e= maxProfilesPerUser {\n\t\treturn nil, errors.BadRequest(\"maximum number of profiles reached\")\n\t}\n\n\t// Check for duplicate name for this user\n\texists, err := s.repo.ExistsByUserIDAndName(ctx, userID, req.Name)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tif exists {\n\t\treturn nil, errors.Conflict(\"you already have a dog with this name\")\n\t}\n\n\t// Create profile\n\tnow := time.Now()\n\tprofile := \u0026model.Profile{\n\t\tID:           uuid.New().String(),\n\t\tUserID:       userID,\n\t\tName:         req.Name,\n\t\tBreed:        req.Breed,\n\t\tAge:          req.Age,\n\t\tGender:       req.Gender,\n\t\tSize:         req.Size,\n\t\tBio:          req.Bio,\n\t\tPersonality:  req.Personality,\n\t\tInterests:    req.Interests,\n\t\tIsNeutered:   req.IsNeutered,\n\t\tIsVaccinated: req.IsVaccinated,\n\t\tIsActive:     true,\n\t\tCreatedAt:    now,\n\t\tUpdatedAt:    now,\n\t}\n\n\t// Set location if provided\n\tif req.Latitude != nil \u0026\u0026 req.Longitude != nil {\n\t\tprofile.Location = \u0026model.Location{\n\t\t\tType:        \"Point\",\n\t\t\tCoordinates: []float64{*req.Longitude, *req.Latitude},\n\t\t\tCity:        req.City,\n\t\t\tCountry:     req.Country,\n\t\t}\n\t}\n\n\tif err := s.repo.Create(ctx, profile); err != nil {\n\t\treturn nil, err\n\t}\n\n\t// Publish profile created event\n\tevent := model.ProfileCreatedEvent{\n\t\tProfileID: profile.ID,\n\t\tUserID:    profile.UserID,\n\t\tName:      profile.Name,\n\t\tBreed:     profile.Breed,\n\t\tCreatedAt: profile.CreatedAt,\n\t}\n\tif err := s.producer.PublishWithKey(ctx, kafka.TopicProfileCreated, profile.ID, kafka.EventProfileCreated, event); err != nil {\n\t\tlogger.Error(\"failed to publish profile created event\", zap.Error(err))\n\t}\n\n\treturn profile, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","name":"CreateProfile","node_type":"function"},{"code":"func (s *ProfileService) validateCreateRequest(req *model.CreateProfileRequest) error {\n\tif req.Name == \"\" {\n\t\treturn errors.ValidationError(\"name is required\")\n\t}\n\tif len(req.Name) \u003e 50 {\n\t\treturn errors.ValidationError(\"name must be less than 50 characters\")\n\t}\n\tif req.Breed == \"\" {\n\t\treturn errors.ValidationError(\"breed is required\")\n\t}\n\tif req.Age \u003c 0 || req.Age \u003e 30 {\n\t\treturn errors.ValidationError(\"age must be between 0 and 30\")\n\t}\n\tif req.Gender != model.DogGenderMale \u0026\u0026 req.Gender != model.DogGenderFemale {\n\t\treturn errors.ValidationError(\"gender must be 'male' or 'female'\")\n\t}\n\tif req.Size != model.DogSizeSmall \u0026\u0026 req.Size != model.DogSizeMedium \u0026\u0026 req.Size != model.DogSizeLarge \u0026\u0026 req.Size != model.DogSizeGiant {\n\t\treturn errors.ValidationError(\"size must be 'small', 'medium', 'large', or 'giant'\")\n\t}\n\tif len(req.Bio) \u003e 500 {\n\t\treturn errors.ValidationError(\"bio must be less than 500 characters\")\n\t}\n\n\treturn nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:342:26","name":"validateCreateRequest","node_type":"function"},{"code":"func (r *ProfileRepository) CountByUserID(ctx context.Context, userID string) (int64, error) {\n\tcount, err := r.collection.CountDocuments(ctx, bson.M{\"user_id\": userID})\n\tif err != nil {\n\t\treturn 0, errors.Wrap(err, errors.CodeInternalServerError, \"failed to count profiles\", 500)\n\t}\n\treturn count, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:197:29","name":"CountByUserID","node_type":"function"},{"code":"func (r *ProfileRepository) ExistsByUserIDAndName(ctx context.Context, userID, name string) (bool, error) {\n\tcount, err := r.collection.CountDocuments(ctx, bson.M{\n\t\t\"user_id\": userID,\n\t\t\"name\":    name,\n\t})\n\tif err != nil {\n\t\treturn false, errors.Wrap(err, errors.CodeInternalServerError, \"failed to check profile existence\", 500)\n\t}\n\treturn count \u003e 0, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:206:29","name":"ExistsByUserIDAndName","node_type":"function"},{"code":"func (r *ProfileRepository) Create(ctx context.Context, profile *model.Profile) error {\n\t_, err := r.collection.InsertOne(ctx, profile)\n\tif err != nil {\n\t\tif mongo.IsDuplicateKeyError(err) {\n\t\t\treturn errors.Conflict(\"profile already exists\")\n\t\t}\n\t\treturn errors.Wrap(err, errors.CodeInternalServerError, \"failed to create profile\", 500)\n\t}\n\treturn nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:56:29","name":"Create","node_type":"function"},{"code":"func (h *Handler) listProfiles(w http.ResponseWriter, r *http.Request) {\n\tfilter := \u0026model.ListProfilesFilter{}\n\n\t// Parse query parameters\n\tquery := r.URL.Query()\n\n\tif breed := query.Get(\"breed\"); breed != \"\" {\n\t\tfilter.Breed = breed\n\t}\n\tif gender := query.Get(\"gender\"); gender != \"\" {\n\t\tfilter.Gender = model.DogGender(gender)\n\t}\n\tif size := query.Get(\"size\"); size != \"\" {\n\t\tfilter.Size = model.DogSize(size)\n\t}\n\tif excludeUser := query.Get(\"exclude_user\"); excludeUser != \"\" {\n\t\tfilter.ExcludeUserID = excludeUser\n\t}\n\tif minAge := query.Get(\"min_age\"); minAge != \"\" {\n\t\tif age, err := strconv.Atoi(minAge); err == nil {\n\t\t\tfilter.MinAge = age\n\t\t}\n\t}\n\tif maxAge := query.Get(\"max_age\"); maxAge != \"\" {\n\t\tif age, err := strconv.Atoi(maxAge); err == nil {\n\t\t\tfilter.MaxAge = age\n\t\t}\n\t}\n\tif limit := query.Get(\"limit\"); limit != \"\" {\n\t\tif l, err := strconv.Atoi(limit); err == nil {\n\t\t\tfilter.Limit = l\n\t\t}\n\t}\n\tif offset := query.Get(\"offset\"); offset != \"\" {\n\t\tif o, err := strconv.Atoi(offset); err == nil {\n\t\t\tfilter.Offset = o\n\t\t}\n\t}\n\n\tprofiles, total, err := h.profileService.ListProfiles(r.Context(), filter)\n\tif err != nil {\n\t\tresponse.Error(w, err)\n\t\treturn\n\t}\n\n\t// Calculate pagination metadata\n\tlimit := filter.Limit\n\tif limit \u003c= 0 {\n\t\tlimit = 20\n\t}\n\ttotalPages := int(total) / limit\n\tif int(total)%limit \u003e 0 {\n\t\ttotalPages++\n\t}\n\n\tresponse.JSONWithMeta(w, http.StatusOK, profiles, \u0026response.Meta{\n\t\tPage:       (filter.Offset / limit) + 1,\n\t\tPerPage:    limit,\n\t\tTotal:      total,\n\t\tTotalPages: totalPages,\n\t})\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","name":"listProfiles","node_type":"function"},{"code":"func (s *ProfileService) ListProfiles(ctx context.Context, filter *model.ListProfilesFilter) ([]*model.Profile, int64, error) {\n\treturn s.repo.List(ctx, filter)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","name":"ListProfiles","node_type":"function"},{"code":"func (r *ProfileRepository) List(ctx context.Context, filter *model.ListProfilesFilter) ([]*model.Profile, int64, error) {\n\tquery := bson.M{\"is_active\": true}\n\n\tif filter.UserID != \"\" {\n\t\tquery[\"user_id\"] = filter.UserID\n\t}\n\tif filter.ExcludeUserID != \"\" {\n\t\tquery[\"user_id\"] = bson.M{\"$ne\": filter.ExcludeUserID}\n\t}\n\tif filter.Breed != \"\" {\n\t\tquery[\"breed\"] = bson.M{\"$regex\": filter.Breed, \"$options\": \"i\"}\n\t}\n\tif filter.Gender != \"\" {\n\t\tquery[\"gender\"] = filter.Gender\n\t}\n\tif filter.Size != \"\" {\n\t\tquery[\"size\"] = filter.Size\n\t}\n\tif filter.MinAge \u003e 0 || filter.MaxAge \u003e 0 {\n\t\tageQuery := bson.M{}\n\t\tif filter.MinAge \u003e 0 {\n\t\t\tageQuery[\"$gte\"] = filter.MinAge\n\t\t}\n\t\tif filter.MaxAge \u003e 0 {\n\t\t\tageQuery[\"$lte\"] = filter.MaxAge\n\t\t}\n\t\tquery[\"age\"] = ageQuery\n\t}\n\n\t// Get total count\n\ttotal, err := r.collection.CountDocuments(ctx, query)\n\tif err != nil {\n\t\treturn nil, 0, errors.Wrap(err, errors.CodeInternalServerError, \"failed to count profiles\", 500)\n\t}\n\n\t// Set defaults\n\tlimit := filter.Limit\n\tif limit \u003c= 0 {\n\t\tlimit = 20\n\t}\n\tif limit \u003e 100 {\n\t\tlimit = 100\n\t}\n\n\toffset := filter.Offset\n\tif offset \u003c 0 {\n\t\toffset = 0\n\t}\n\n\t// Find profiles\n\topts := options.Find().\n\t\tSetLimit(int64(limit)).\n\t\tSetSkip(int64(offset)).\n\t\tSetSort(bson.D{{Key: \"created_at\", Value: -1}})\n\n\tcursor, err := r.collection.Find(ctx, query, opts)\n\tif err != nil {\n\t\treturn nil, 0, errors.Wrap(err, errors.CodeInternalServerError, \"failed to find profiles\", 500)\n\t}\n\tdefer cursor.Close(ctx)\n\n\tvar profiles []*model.Profile\n\tif err := cursor.All(ctx, \u0026profiles); err != nil {\n\t\treturn nil, 0, errors.Wrap(err, errors.CodeInternalServerError, \"failed to decode profiles\", 500)\n\t}\n\n\treturn profiles, total, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","name":"List","node_type":"function"},{"code":"func (h *Handler) myProfiles(w http.ResponseWriter, r *http.Request) {\n\tuserID := r.Header.Get(\"X-User-ID\")\n\tif userID == \"\" {\n\t\tresponse.Error(w, errors.Unauthorized(\"authentication required\"))\n\t\treturn\n\t}\n\n\tif r.Method != http.MethodGet {\n\t\tresponse.Error(w, errors.BadRequest(\"method not allowed\"))\n\t\treturn\n\t}\n\n\tprofiles, err := h.profileService.GetUserProfiles(r.Context(), userID)\n\tif err != nil {\n\t\tresponse.Error(w, err)\n\t\treturn\n\t}\n\n\tresponse.OK(w, profiles)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","name":"myProfiles","node_type":"function"},{"code":"func (s *ProfileService) GetUserProfiles(ctx context.Context, userID string) ([]*model.Profile, error) {\n\treturn s.repo.GetByUserID(ctx, userID)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","name":"GetUserProfiles","node_type":"function"},{"code":"func (r *ProfileRepository) GetByUserID(ctx context.Context, userID string) ([]*model.Profile, error) {\n\tcursor, err := r.collection.Find(ctx, bson.M{\"user_id\": userID})\n\tif err != nil {\n\t\treturn nil, errors.Wrap(err, errors.CodeInternalServerError, \"failed to get profiles\", 500)\n\t}\n\tdefer cursor.Close(ctx)\n\n\tvar profiles []*model.Profile\n\tif err := cursor.All(ctx, \u0026profiles); err != nil {\n\t\treturn nil, errors.Wrap(err, errors.CodeInternalServerError, \"failed to decode profiles\", 500)\n\t}\n\n\treturn profiles, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","name":"GetByUserID","node_type":"function"},{"code":"func (h *Handler) profilesByUserID(w http.ResponseWriter, r *http.Request) {\n\tif r.Method != http.MethodGet {\n\t\tresponse.Error(w, errors.BadRequest(\"method not allowed\"))\n\t\treturn\n\t}\n\n\t// Extract user ID from path /api/v1/profiles/user/{userID}\n\tpath := strings.TrimPrefix(r.URL.Path, \"/api/v1/profiles/user/\")\n\tuserID := strings.TrimSuffix(path, \"/\")\n\n\tif userID == \"\" {\n\t\tresponse.Error(w, errors.BadRequest(\"user ID is required\"))\n\t\treturn\n\t}\n\n\tprofiles, err := h.profileService.GetUserProfiles(r.Context(), userID)\n\tif err != nil {\n\t\tresponse.Error(w, err)\n\t\treturn\n\t}\n\n\tresponse.OK(w, profiles)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","name":"profilesByUserID","node_type":"function"},{"code":"func (h *Handler) profileByID(w http.ResponseWriter, r *http.Request) {\n\t// Extract profile ID from path /api/v1/profiles/{id}\n\tpath := strings.TrimPrefix(r.URL.Path, \"/api/v1/profiles/\")\n\tprofileID := strings.TrimSuffix(path, \"/\")\n\n\tif profileID == \"\" || profileID == \"me\" {\n\t\tresponse.Error(w, errors.BadRequest(\"profile ID is required\"))\n\t\treturn\n\t}\n\n\tuserID := r.Header.Get(\"X-User-ID\")\n\n\tswitch r.Method {\n\tcase http.MethodGet:\n\t\tprofile, err := h.profileService.GetProfile(r.Context(), profileID)\n\t\tif err != nil {\n\t\t\tresponse.Error(w, err)\n\t\t\treturn\n\t\t}\n\t\tresponse.OK(w, profile)\n\n\tcase http.MethodPut:\n\t\tif userID == \"\" {\n\t\t\tresponse.Error(w, errors.Unauthorized(\"authentication required\"))\n\t\t\treturn\n\t\t}\n\t\th.updateProfile(w, r, profileID, userID)\n\n\tcase http.MethodDelete:\n\t\tif userID == \"\" {\n\t\t\tresponse.Error(w, errors.Unauthorized(\"authentication required\"))\n\t\t\treturn\n\t\t}\n\t\th.deleteProfile(w, r, profileID, userID)\n\n\tdefault:\n\t\tresponse.Error(w, errors.BadRequest(\"method not allowed\"))\n\t}\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","name":"profileByID","node_type":"function"},{"code":"func (s *ProfileService) GetProfile(ctx context.Context, id string) (*model.Profile, error) {\n\tprofile, err := s.repo.GetByID(ctx, id)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\t// =====================================================\n\t// CROSS-SERVICE CALL: Fetch photos from Media Service\n\t// =====================================================\n\tphotos, err := s.fetchProfilePhotos(ctx, id)\n\tif err != nil {\n\t\t// Log error but don't fail - photos are optional\n\t\tlogger.Warn(\"failed to fetch profile photos\",\n\t\t\tzap.String(\"profile_id\", id),\n\t\t\tzap.Error(err),\n\t\t)\n\t} else {\n\t\tprofile.Photos = photos\n\t}\n\n\treturn profile, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","name":"GetProfile","node_type":"function"},{"code":"func (r *ProfileRepository) GetByID(ctx context.Context, id string) (*model.Profile, error) {\n\tvar profile model.Profile\n\terr := r.collection.FindOne(ctx, bson.M{\"_id\": id}).Decode(\u0026profile)\n\tif err == mongo.ErrNoDocuments {\n\t\treturn nil, errors.ProfileNotFound()\n\t}\n\tif err != nil {\n\t\treturn nil, errors.Wrap(err, errors.CodeInternalServerError, \"failed to get profile\", 500)\n\t}\n\treturn \u0026profile, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:68:29","name":"GetByID","node_type":"function"},{"code":"func (s *ProfileService) fetchProfilePhotos(ctx context.Context, profileID string) ([]*model.Photo, error) {\n\tif s.mediaClient == nil {\n\t\treturn nil, nil // Media service not configured\n\t}\n\n\tresp, err := s.mediaClient.Get(ctx, fmt.Sprintf(\"/api/v1/media/profile/%s\", profileID), nil)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tif !resp.IsSuccess() {\n\t\t// 404 is expected if no photos exist\n\t\tif resp.StatusCode == 404 {\n\t\t\treturn []*model.Photo{}, nil\n\t\t}\n\t\treturn nil, errors.InternalServerError(\"failed to fetch photos\")\n\t}\n\n\tvar result struct {\n\t\tData []struct {\n\t\t\tID           string `json:\"id\"`\n\t\t\tURL          string `json:\"url\"`\n\t\t\tThumbnailURL string `json:\"thumbnail_url\"`\n\t\t\tIsPrimary    bool   `json:\"is_primary\"`\n\t\t\tSortOrder    int    `json:\"sort_order\"`\n\t\t} `json:\"data\"`\n\t}\n\tif err := resp.DecodeJSON(\u0026result); err != nil {\n\t\treturn nil, errors.Wrap(err, errors.CodeInternalServerError, \"failed to decode photos response\", 500)\n\t}\n\n\tphotos := make([]*model.Photo, len(result.Data))\n\tfor i, p := range result.Data {\n\t\tphotos[i] = \u0026model.Photo{\n\t\t\tID:           p.ID,\n\t\t\tURL:          p.URL,\n\t\t\tThumbnailURL: p.ThumbnailURL,\n\t\t\tIsPrimary:    p.IsPrimary,\n\t\t\tSortOrder:    p.SortOrder,\n\t\t}\n\t}\n\n\tlogger.Debug(\"fetched profile photos\",\n\t\tzap.String(\"profile_id\", profileID),\n\t\tzap.Int(\"count\", len(photos)),\n\t)\n\n\treturn photos, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","name":"fetchProfilePhotos","node_type":"function"},{"code":"func (h *Handler) updateProfile(w http.ResponseWriter, r *http.Request, profileID, userID string) {\n\tvar req model.UpdateProfileRequest\n\tif err := json.NewDecoder(r.Body).Decode(\u0026req); err != nil {\n\t\tresponse.Error(w, errors.BadRequest(\"invalid request body\"))\n\t\treturn\n\t}\n\n\tprofile, err := h.profileService.UpdateProfile(r.Context(), profileID, userID, \u0026req)\n\tif err != nil {\n\t\tresponse.Error(w, err)\n\t\treturn\n\t}\n\n\tresponse.OK(w, profile)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","name":"updateProfile","node_type":"function"},{"code":"func (s *ProfileService) UpdateProfile(ctx context.Context, id, userID string, req *model.UpdateProfileRequest) (*model.Profile, error) {\n\tprofile, err := s.repo.GetByID(ctx, id)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\t// Verify ownership\n\tif profile.UserID != userID {\n\t\treturn nil, errors.Forbidden(\"you don't own this profile\")\n\t}\n\n\t// Apply updates\n\tif req.Name != nil {\n\t\t// Check for duplicate name (excluding current profile)\n\t\texists, err := s.repo.ExistsByUserIDAndName(ctx, userID, *req.Name)\n\t\tif err != nil {\n\t\t\treturn nil, err\n\t\t}\n\t\tif exists \u0026\u0026 *req.Name != profile.Name {\n\t\t\treturn nil, errors.Conflict(\"you already have a dog with this name\")\n\t\t}\n\t\tprofile.Name = *req.Name\n\t}\n\tif req.Breed != nil {\n\t\tprofile.Breed = *req.Breed\n\t}\n\tif req.Age != nil {\n\t\tif *req.Age \u003c 0 || *req.Age \u003e 30 {\n\t\t\treturn nil, errors.ValidationError(\"age must be between 0 and 30\")\n\t\t}\n\t\tprofile.Age = *req.Age\n\t}\n\tif req.Gender != nil {\n\t\tprofile.Gender = *req.Gender\n\t}\n\tif req.Size != nil {\n\t\tprofile.Size = *req.Size\n\t}\n\tif req.Bio != nil {\n\t\tif len(*req.Bio) \u003e 500 {\n\t\t\treturn nil, errors.ValidationError(\"bio must be less than 500 characters\")\n\t\t}\n\t\tprofile.Bio = *req.Bio\n\t}\n\tif req.Personality != nil {\n\t\tprofile.Personality = req.Personality\n\t}\n\tif req.Interests != nil {\n\t\tprofile.Interests = req.Interests\n\t}\n\tif req.IsNeutered != nil {\n\t\tprofile.IsNeutered = *req.IsNeutered\n\t}\n\tif req.IsVaccinated != nil {\n\t\tprofile.IsVaccinated = *req.IsVaccinated\n\t}\n\tif req.IsActive != nil {\n\t\tprofile.IsActive = *req.IsActive\n\t}\n\n\t// Update location if provided\n\tif req.Latitude != nil \u0026\u0026 req.Longitude != nil {\n\t\tcity := \"\"\n\t\tcountry := \"\"\n\t\tif req.City != nil {\n\t\t\tcity = *req.City\n\t\t}\n\t\tif req.Country != nil {\n\t\t\tcountry = *req.Country\n\t\t}\n\t\tprofile.Location = \u0026model.Location{\n\t\t\tType:        \"Point\",\n\t\t\tCoordinates: []float64{*req.Longitude, *req.Latitude},\n\t\t\tCity:        city,\n\t\t\tCountry:     country,\n\t\t}\n\t}\n\n\tif err := s.repo.Update(ctx, profile); err != nil {\n\t\treturn nil, err\n\t}\n\n\t// Publish profile updated event\n\tevent := model.ProfileUpdatedEvent{\n\t\tProfileID: profile.ID,\n\t\tUserID:    profile.UserID,\n\t\tName:      profile.Name,\n\t\tBreed:     profile.Breed,\n\t\tUpdatedAt: profile.UpdatedAt,\n\t}\n\tif err := s.producer.PublishWithKey(ctx, kafka.TopicProfileUpdated, profile.ID, kafka.EventProfileUpdated, event); err != nil {\n\t\tlogger.Error(\"failed to publish profile updated event\", zap.Error(err))\n\t}\n\n\treturn profile, nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","name":"UpdateProfile","node_type":"function"},{"code":"func (r *ProfileRepository) Update(ctx context.Context, profile *model.Profile) error {\n\tprofile.UpdatedAt = time.Now()\n\n\tresult, err := r.collection.ReplaceOne(ctx, bson.M{\"_id\": profile.ID}, profile)\n\tif err != nil {\n\t\treturn errors.Wrap(err, errors.CodeInternalServerError, \"failed to update profile\", 500)\n\t}\n\n\tif result.MatchedCount == 0 {\n\t\treturn errors.ProfileNotFound()\n\t}\n\n\treturn nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:97:29","name":"Update","node_type":"function"},{"code":"func (h *Handler) deleteProfile(w http.ResponseWriter, r *http.Request, profileID, userID string) {\n\tif err := h.profileService.DeleteProfile(r.Context(), profileID, userID); err != nil {\n\t\tresponse.Error(w, err)\n\t\treturn\n\t}\n\n\tresponse.NoContent(w)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","name":"deleteProfile","node_type":"function"},{"code":"func (s *ProfileService) DeleteProfile(ctx context.Context, id, userID string) error {\n\tprofile, err := s.repo.GetByID(ctx, id)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t// Verify ownership\n\tif profile.UserID != userID {\n\t\treturn errors.Forbidden(\"you don't own this profile\")\n\t}\n\n\tif err := s.repo.Delete(ctx, id); err != nil {\n\t\treturn err\n\t}\n\n\t// Publish profile deleted event\n\tevent := model.ProfileDeletedEvent{\n\t\tProfileID: id,\n\t\tUserID:    userID,\n\t\tDeletedAt: time.Now(),\n\t}\n\tif err := s.producer.PublishWithKey(ctx, kafka.TopicProfileDeleted, id, kafka.EventProfileDeleted, event); err != nil {\n\t\tlogger.Error(\"failed to publish profile deleted event\", zap.Error(err))\n\t}\n\n\treturn nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","name":"DeleteProfile","node_type":"function"},{"code":"func (r *ProfileRepository) Delete(ctx context.Context, id string) error {\n\tresult, err := r.collection.DeleteOne(ctx, bson.M{\"_id\": id})\n\tif err != nil {\n\t\treturn errors.Wrap(err, errors.CodeInternalServerError, \"failed to delete profile\", 500)\n\t}\n\n\tif result.DeletedCount == 0 {\n\t\treturn errors.ProfileNotFound()\n\t}\n\n\treturn nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:113:29","name":"Delete","node_type":"function"},{"code":"func NewUserEventConsumer(brokers []string, groupID string, profileService *service.ProfileService) *UserEventConsumer {\n\tconsumer := kafka.NewConsumer(brokers, groupID, []string{kafka.TopicUserCreated})\n\n\tuec := \u0026UserEventConsumer{\n\t\tconsumer:       consumer,\n\t\tprofileService: profileService,\n\t}\n\n\t// Register handlers\n\tconsumer.RegisterHandler(kafka.EventUserCreated, uec.handleUserCreated)\n\n\treturn uec\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","name":"NewUserEventConsumer","node_type":"function"},{"code":"func (c *UserEventConsumer) handleUserCreated(ctx context.Context, event kafka.Event) error {\n\tvar data UserCreatedEventData\n\tif err := json.Unmarshal(event.Data, \u0026data); err != nil {\n\t\tlogger.Error(\"failed to unmarshal user created event data\",\n\t\t\tzap.Error(err),\n\t\t\tzap.String(\"event_id\", event.ID),\n\t\t)\n\t\treturn err\n\t}\n\n\tlogger.Info(\"received user created event\",\n\t\tzap.String(\"user_id\", data.UserID),\n\t\tzap.String(\"email\", data.Email),\n\t)\n\n\t// We could create a default profile here, but for now we just log\n\t// The user will create their own profile(s)\n\treturn c.profileService.CreateDefaultProfile(ctx, data.UserID, data.Email)\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:51:29","name":"handleUserCreated","node_type":"function"},{"code":"func (s *ProfileService) CreateDefaultProfile(ctx context.Context, userID, email string) error {\n\t// This is called from the Kafka consumer when a user is created\n\t// We don't create a default profile automatically - the user will create their own\n\tlogger.Info(\"user created, ready for profile creation\",\n\t\tzap.String(\"user_id\", userID),\n\t\tzap.String(\"email\", email),\n\t)\n\treturn nil\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:276:26","name":"CreateDefaultProfile","node_type":"function"},{"code":"func (c *UserEventConsumer) Start(ctx context.Context) {\n\tlogger.Info(\"starting user event consumer\")\n\tif err := c.consumer.Start(ctx); err != nil {\n\t\tlogger.Error(\"user event consumer error\", zap.Error(err))\n\t}\n}","external":"false","id":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:43:29","name":"Start","node_type":"function"}],"links":[{"column":27,"line":63,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:20:6","val":1},{"column":23,"line":66,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:27:29","val":1},{"column":45,"line":50,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:27:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:27:29","val":1},{"column":27,"line":74,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:28:6","val":1},{"column":37,"line":30,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:28:6","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:28:6","val":1},{"column":14,"line":80,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:21:6","val":1},{"column":3,"line":84,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","val":1},{"column":29,"line":29,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:39:19","val":1},{"column":38,"line":32,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":18,"line":50,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":4,"line":53,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","val":1},{"column":17,"line":127,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","val":1},{"column":34,"line":131,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":13,"line":42,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:342:26","val":1},{"column":35,"line":42,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":22,"line":47,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:197:29","val":1},{"column":43,"line":197,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:197:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:197:29","val":1},{"column":36,"line":47,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":41,"line":47,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":23,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:206:29","val":1},{"column":43,"line":206,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:206:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:206:29","val":1},{"column":45,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":50,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":18,"line":94,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:56:29","val":1},{"column":34,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:56:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:56:29","val":1},{"column":39,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:56:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:56:29","val":1},{"column":25,"line":94,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":37,"line":106,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:41:26","val":1},{"column":61,"line":131,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","val":1},{"column":17,"line":133,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","val":1},{"column":18,"line":137,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:125:19","val":1},{"column":18,"line":53,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":21,"line":53,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":4,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","val":1},{"column":42,"line":228,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","val":1},{"column":15,"line":271,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","val":1},{"column":43,"line":156,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","val":1},{"column":34,"line":181,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","val":1},{"column":20,"line":185,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","val":1},{"column":22,"line":188,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:127:29","val":1},{"column":20,"line":271,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","val":1},{"column":25,"line":271,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:271:26","val":1},{"column":17,"line":230,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","val":1},{"column":23,"line":244,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:190:19","val":1},{"column":17,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":20,"line":56,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":17,"line":59,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:45:19","val":1},{"column":41,"line":33,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","val":1},{"column":17,"line":66,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","val":1},{"column":17,"line":71,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","val":1},{"column":35,"line":75,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","val":1},{"column":15,"line":139,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","val":1},{"column":34,"line":81,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","val":1},{"column":20,"line":85,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","val":1},{"column":22,"line":88,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:81:29","val":1},{"column":27,"line":139,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","val":1},{"column":32,"line":139,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","val":1},{"column":17,"line":77,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","val":1},{"column":13,"line":81,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:64:19","val":1},{"column":44,"line":34,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","val":1},{"column":17,"line":167,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","val":1},{"column":17,"line":176,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","val":1},{"column":35,"line":180,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:139:26","val":1},{"column":17,"line":182,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","val":1},{"column":13,"line":186,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:166:19","val":1},{"column":39,"line":35,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:28:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":17,"line":90,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":35,"line":98,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","val":1},{"column":24,"line":115,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:68:29","val":1},{"column":29,"line":69,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:68:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:68:29","val":1},{"column":32,"line":115,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","val":1},{"column":37,"line":115,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","val":1},{"column":18,"line":123,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","val":1},{"column":32,"line":295,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","val":1},{"column":77,"line":295,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","val":1},{"column":27,"line":333,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:291:26","val":1},{"column":37,"line":123,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","val":1},{"column":42,"line":123,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","val":1},{"column":28,"line":127,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:115:26","val":1},{"column":18,"line":100,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":14,"line":103,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":18,"line":107,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":4,"line":110,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","val":1},{"column":17,"line":143,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","val":1},{"column":34,"line":147,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":24,"line":144,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:68:29","val":1},{"column":32,"line":144,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":37,"line":144,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":24,"line":157,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:206:29","val":1},{"column":46,"line":157,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":51,"line":157,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":18,"line":221,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:97:29","val":1},{"column":40,"line":99,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:97:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:97:29","val":1},{"column":72,"line":99,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:97:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:97:29","val":1},{"column":25,"line":221,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":37,"line":233,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:144:26","val":1},{"column":61,"line":147,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","val":1},{"column":72,"line":147,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","val":1},{"column":17,"line":149,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","val":1},{"column":13,"line":153,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:141:19","val":1},{"column":18,"line":110,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":21,"line":110,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":18,"line":114,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":4,"line":117,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","val":1},{"column":28,"line":157,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":24,"line":242,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:68:29","val":1},{"column":32,"line":242,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":37,"line":242,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":18,"line":252,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:113:29","val":1},{"column":39,"line":113,"source":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:113:29","target":"/home/evan/Code/rinder/services/profile/internal/repository/profile_repository.go:113:29","val":1},{"column":25,"line":252,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":30,"line":252,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":37,"line":262,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":69,"line":262,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:242:26","val":1},{"column":55,"line":157,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","val":1},{"column":66,"line":157,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","val":1},{"column":17,"line":158,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","val":1},{"column":20,"line":162,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:157:19","val":1},{"column":18,"line":117,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":21,"line":117,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":17,"line":120,"source":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","target":"/home/evan/Code/rinder/services/profile/internal/handler/handler.go:85:19","val":1},{"column":27,"line":92,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","val":1},{"column":31,"line":28,"source":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","val":1},{"column":40,"line":28,"source":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","val":1},{"column":54,"line":36,"source":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:28:6","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:51:29","val":1},{"column":25,"line":67,"source":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:51:29","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:276:26","val":1},{"column":24,"line":279,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:276:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:276:26","val":1},{"column":22,"line":280,"source":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:276:26","target":"/home/evan/Code/rinder/services/profile/internal/service/profile_service.go:276:26","val":1},{"column":46,"line":67,"source":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:51:29","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:51:29","val":1},{"column":18,"line":94,"source":"/home/evan/Code/rinder/services/profile/cmd/main.go:25:1","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:43:29","val":1},{"column":28,"line":44,"source":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:43:29","target":"/home/evan/Code/rinder/services/profile/internal/consumer/user_consumer.go:43:29","val":1}]}